---
title: 第30节：分布式动态限流和熔断
pay: https://t.zsxq.com/8HkZf
---

# 《大营销平台系统设计实现》 - 营销服务 第30节：分布式动态限流和熔断

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

- **本章难度**：★★★☆☆
- **本章重点**：增加动态黑名单限流组件，通过访问动态限制将限流用户24H存入本地缓存，通过统一 Dcc 全局配置控制使用。
- **课程视频**：[https://t.zsxq.com/Uklsj](https://t.zsxq.com/Uklsj)

**版权说明**：©本项目与星球签约合作，受[《中华人民共和国著作权法实施条例》](http://www.gov.cn/zhengce/2020-12/26/content_5573623.htm) 版权法保护，禁止任何理由和任何方式公开(public)源码、资料、视频等内容到Github、Gitee等，违反可追究进一步的法律行动。

## 一、本章诉求

增加动态黑名单限流组件，通过访问动态限制将限流用户24H存入本地缓存，通过统一 Dcc 全局配置控制使用。并在方法上引入接口超时熔断组件。这两个东西都是分布式架构场景非常常用的手段。也经常在面试中提问，你的接口是如何保证可用性的，有什么手段对频繁访问的用户做出拦截处理。以及超时后的处理。

## 二、业务流程

如图，限流熔断组件实现方案；

<div align="center">
    <img src="https://bugstack.cn/images/article/project/big-market/big-market-43-01.png" width="550px">
</div>

在上一节通过 Zookeeper 实现的动态配置中心 @DCC 服务下，对新增加 RateLimiter 动态限流黑名单服务提供控制管理。

- 首先，因为我们引入切面了，那么上一节 @DCC 直接获取类操作属性的梳理就要考虑代理类的存在了。因为这时候被切面管理的类，在 Spring 中是一个代理对象，而不是原始对象，所以本节还涉及了 DCC 代码的处理。
- 之后，本节要增加的是 RateLimiter 限流，当一个用户频繁访问超过N次后，则会将这个用户加入黑名单列表，不允许在访问当前服务。直至过了超时时间从黑名单列表移走后才允许访问。
- 另外，本节还引入了接口超时熔断组件。降级、熔断、限流，这也是一套分布式微服务非常重要的手段。

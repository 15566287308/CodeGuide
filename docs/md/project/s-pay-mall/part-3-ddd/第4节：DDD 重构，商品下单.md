---
title: 第3-4节：DDD重构，商品下单
pay: https://t.zsxq.com/3X9GA
---

# 《小型支付商城系统》第3-4节：DDD重构，商品下单

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

> 沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

通过 DDD 领域设计，从 MVC 工程拆分下单中的创建订单到 DDD 工程中实现。

相对于 MVC 工程的设计，DDD 的每个领域就是独立的空间，它会仔细考虑请求方法的出入参对象，而这些对象叫做领域对象。

在整个实现过程，每一个领域的功能，我们可以想象为；一个人，拿着一把钥匙，开锁到进屋。那么这里的一个人是用户、一把钥匙是入参领域对象、开锁是决策命令，完成开锁进屋是做完了一件事的领域事件。这个过程就是四色建模中的战略设计过程。

那么本节的下单，就是这样一个过程，用户通过购物车创建订单到支付。那么这里你可以思考，它的决策命令、领域事件、领域对象都是什么，接下来我们就要做这样一个实现。

## 二、下单模型

通过 DDD 领域驱动设计，本节实现点击下单，创建订单的处理。这一部分的设计可以参考第2部分中的四色建模设计。

<div align="center">
    <img src="https://bugstack.cn/images/article/project/s-pay-mall/s-pay-mall-2-2-03.png" width="950px">
</div>

- 本节我们先来实现用户点击下单的动作，完成商品下单。到下一节在处理关于支付宝沙箱的支付单处理。